### **Занятие 2: Знакомство с DBT и построение пайплайнов**

**План занятия:**

**1. Теоретическая часть:**
Часть 1. 

- Что такое DBT и какие проблемы он решает.
- Основные концепции DBT: модели, источники (sources), макросы (jinja).
- Стратегии обновления данных:
    - Full-refresh.
    - Incremental (merge, insert-delete).
    - Views и их использование.
- Конфигурация моделей в DBT.

Часть 2. 

- Тестирование в DBT:
    - Встроенные тесты (unique, not_null, relationships).
    - Кастомные тесты.
- Роль Elementary в мониторинге данных.
- Документирование моделей в DBT:
    - Использование `schema.yml`.
    - Описание источников (sources) и моделей.
- Важность покрытия кода тестами и документацией.


**2. Практическая часть:**
Часть 1. 
- Настроить проект в DBT и подключить Elementary.
- Создать DBT-модели для обработки данных:
    - Простые модели (очистка данных, парсинг).
    - Модели с инкрементальной загрузкой.
- Сделать аналитические витрины с использованием DBT и как минимум двух видов инкрементальной
    загрузки.
- Использовать теги или префиксы или схемы для разделения моделей по функциональности. STG - ODS - DWH / DM.
- Настроить запуск dbt пайплайнов через Airflow по расписанию. 

Часть 2. 
- Покрыть модели тестами:
    - Встроенные тесты DBT.
    - Кастомные тесты.
    - Встроенные тесты Elementary.
- Задокументировать модели и источники.
- Завершить финальный проект, где:
    - Данные записываются в MongoDB.
    - Перекладываются в PostgreSQL через Airflow.
    - Строятся и обновляются аналитические витрины в PostgreSQL с помощью DBT.
    - Код покрыт тестами и документацией.
- Подготовить проект и сделать его соответствующим требованиям курса
    из [evaluation.md](./evaluation.md).
- Подготовить презентацию проекта.


**3. Артефакты:**
- Работающие пайплайны на DBT в Airflow.
- Обновляемая аналитическая витрина в PostgreSQL – credentials на подключение и указание, в какие витрины смотреть. 
- Код пайплайнов в репозитории.
- Финальный проект с полным циклом обработки данных, соответствующий требованиям курса.
- Презентация проекта.
